---
title: "Dashboard Project"
author: 이용규, 이태현, 정아영, 최지원
date: "2024-07-25"
---

```{python}
import folium
from folium import Choropleth, Circle, Marker
from folium.plugins import HeatMap
import pandas as pd
import webbrowser


data = pd.read_csv("houseprice-with-lonlat.csv")

df = df.iloc[:, 1:]

# 집 가격 범위랑 그에 따른 색 list 만들기 
price_ranges = [100000, 200000, 300000, 400000, 500000, 600000, 700000, float('inf')]
colors = ['blue', 'green', 'orange', 'red', 'purple', 'darkred', 'black', 'grey']

# 가격에 따른 색 지정 
def get_color(price):
    for i, range_upper in enumerate(price_ranges):
        if price <= range_upper:
            return colors[i]
        
map_center = [data['Latitude'].mean(), data['Longitude'].mean()]

my_map = folium.Map(location=map_center, zoom_start=12,tiles = "cartodbpositron")

for price, lat, lon in zip(data['Sale_Price'], data['Latitude'], data['Longitude']):
    color = get_color(price)
    folium.Circle(
        location=[lat, lon],
        radius=20,
        color=color,
        popup=f"Price: ${price}"
        fill=True,
        fill_opacity=0.6,
    ).add_to(my_map)
    

corrected_map_path = 'house_price_corrected_colored_map.html'
my_map.save(corrected_map_path)
corrected_map_path
```

```{python}

data = pd.read_csv("houseprice-with-lonlat.csv")

map_center = [data['Latitude'].mean(), data['Longitude'].mean()]
my_map = folium.Map(location=map_center, zoom_start=12)

def get_icon_size(price):
    return [price / 10000, price / 10000]
#ZIP 안 쓰고
for i in range(len(data)):
    price = data['Sale_Price'][i]
    lat = data['Latitude'][i]
    lon = data['Longitude'][i]
    icon_size = get_icon_size(price)
    
    icon_html = f'<i class="fa fa-home" style="color:#FF1234;font-size:{icon_size[0]}px;"></i>'
    icon = folium.DivIcon(html=icon_html)
    
    folium.Marker(
        location=[lat, lon],
        popup=f"Price: ${price}",
        icon=icon
    ).add_to(my_map)
my_map.save("house_price_home_icons_map.html")
```



